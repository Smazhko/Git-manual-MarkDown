# Руководство пользователя GIT (командная строка)

## **Глоссарий**

**`Реппозиторий`** - папка с проектом, которая находится под наблюдением системы контроля версий и в которой производится версионирование

**`Индексация`** - добавление для наблюдения (версиализации) указанного файла// сохранения файла с внесенными изменениями (состояние STAGED)

**`Коммит`** - сохранение состояния проекта, содержащее все наблюдаемые файлы и каталоги

**`Ветвление`** (branching) означает отклонение от основной линии разработки, после которого работа перестает затрагивать эту самую основную линию.
***
## **Команды для работы с репозиторием**

**`git init`** - инициализирует репозиторий в такущей директории.

**`git status`** - вывод статуса *текущего* файла (с параметрами **`-s`** или **`--short`** информация выводится в упрощённом виде):
* **`U`** неиндексированный / ненаблюдаемый
* **`M`** модифицированный, но НЕиндексированный
* **`A`** индексированный (added = staged), но не коммитированный
* **`MM`** - модифицирован, индексирован и снова модифицирован (до коммита)
* комиттированный
* **`R`** - переименованный, но не комиттированный

**`git add имя.файла`** - инициализирует файл и делет его *текущим* для ***комитт***ирования:
* **`git add FILE_NAME_1 FILE_NAME_2`** - инициализировать можно сразу несколько файлов. Также можно использовать регулярные выражения (*, ? etc)

**`git commit`** - создаёт коммит, запуская текстовый редактор для создания комментария (выход из редактора :qa Enter) 
* работает только с индексированными файлами, иначе выдает сообщение о том, что нечего ***коммит***ировать;
* **`git commit -m "YOUR_MESSAGE"`** - создаёт коммит и приклепляет к нему коментарий
* **`git commit -am "YOUR_MESSAGE"` или `git commit -a -m "YOUR_MESSAGE"`** - комбо комманд `git add` и `git commit -m` (работает только с инициализированными файлами, если таковые имеются);

**`git diff`** подробное описание, что именно изменилось между последним коммитом и текущей фодификацией файла (необходимо сохранить иземнения)
* git diff --staged - сравнивает последний коммит с индексированным файлом (состояние после git add)

**`git log`** - журнал всех коммитов с последнего коммита в текущей ветке до первого коммита проекта в главной ветке (в обратном порядке):
>выход из журнала осуществляется по нажатию **`Q`** на клавиатуре (необходимо, чтоб была включена английская раскладка). 
* **`--graph`** - вывод журнала коммитов с визаулизацией ветвления
* **`-p`** - показывает разницу каждого коммита
* **`-2`** - вывод журнала ограничен последними двумя коммитами
* **`--stat`** - выводит статистику по каждому коомиту
* **`--pretty=oneline (=short, =full, =fuller)`** - разный форматы вывода фурнала
* **`--oneline`** - вывод коммитов в сокращённом варианте по 1 коммиту на строку
* **`--pretty=format:"%h - %an | %ar: %s"`** - вывод журнала в форматированном виде (ищи таблицу условных сокращений).
* **`-all`** 
* **`--since, --after`** - Показывает только коммиты, внесенные после указанной 
даты
* **`--until, --before`** - Показывает только коммиты, внесенные до указанной даты
* **`--author`** - Показывает только коммиты определенного автора
* **`--committer`** - Показывает только коммиты, внесенные определенным 
участником
* **`--grep`** Показывает только коммиты с сообщением фиксации, содержащим указанную строку
* **`-S`** - Показывает только коммиты, в которых добавленный или удаленный код совпадает с указанной строкой


**`git checkout имя.коммита`** - просмотр желаемого коммита (возможно использование первых 4-6 символов из 16-ричного кода коммита):
* **`git checkout BRANCH_NAME`** - после просмотра необходимого коммита позволяет вернуться к самому позднему (последнему) коммиту.

***
## **Работа с ветвлением**

**`git branch`** - выводит список веток с указанием текущей ветки (отметка звёздочкой)

* **`git branch <new_branch_name> `** - создание новой ветки; ответвление создаётся из *текущей* ветки

**`git checkout -b <new_branch_name>`** - создание новой ветки с последующим на неё переключением

**`git branch -M <new_name>`** - переименование ветки

**`git branch -d <exist_branch_name>`** - удаление ветки

**`git checkout <exist_branch_name>`** - переключение на нужную ветку

**`git merge <exist_branch_name>`** - слияние указанной ветки с текущей.
> При слиянии веток может быть 2 варианта развития событий: слияние без конфликта (в старый файл добавляются новые сведения) и слияние с конфликтом (гит без участия пользователя не может решить, что заменить, а что оставить).  
Решение конфликта слияния может по выбору идти по 4 путям:
>1. оставить начальный вариант (не принимать изменения из сливаемой ветки);
>2. произвести замену текущего (current) состояния на входящее (incoming);
>3. оставить оба варианта (accept both);
>4. произвести ручное сравнение (compare changes), после которого вернуться и всё-таки решить, что делать.

***

## **Настройки GIT**
* git version
* git config --global user.name "Your Name"
* git config --global user.email "your_email@whatever.com"
* git config --global alias.co checkout
* git config --global alias.ci commit
* git config --global alias.hist "log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short"

***

## **Работа с файлами**
**`git mv OLD-FILENAME NEW-FILENAME`** - переименование файла с сохранением всех коммитов:
* после переименования в статусе файла и проводнике `Visual Studio Code` появляется буква **`R`** (Rename), после чего необходимо создать новый коммит с комментарием о переименовании;
* можно запустить **`git log`** для того, чтобы убедиться, что все коммиты сохранены. При этом GIT воссоздает файл со старым именем в репозитории и помечает его как *ненаблюдаемый (untracked)*

**`git rm FILE_NAME (DIRECTORY_NAME)`** - удаляет файл или папку из отслеживания GITом

**`mkdir DIRECTORY_NAME`** - создать каталог  
**`cd DIRECTORY_NAME`** - переключиться на каталог  
**`touch FILE_NAME`** - создать файл